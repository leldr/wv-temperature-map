{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.buildConnectionString = void 0;\nfunction isQuoted(val) {\n  if (val[0] !== '{') {\n    return false;\n  }\n  for (let i = 1; i < val.length; i++) {\n    if (val[i] === '}') {\n      if (i + 1 === val.length) {\n        // if last char, then it's quoted properly\n        return true;\n      } else if (val[i + 1] !== '}') {\n        // the next char is no a `}` so there is no valid escaping here\n        return false;\n      } else {\n        // we are seeing an escaped `}`, so skip ahead\n        i++;\n      }\n    }\n  }\n  return false;\n}\nfunction needsQuotes(val) {\n  var _a;\n  return !isQuoted(val) && !!((_a = val.match(/\\[|]|{|}|\\|\\(|\\)|,|;|\\?|\\*|=|!|@/)) === null || _a === void 0 ? void 0 : _a.length);\n}\nfunction encodeTuple(key, value) {\n  if (value === null || value === undefined) {\n    return [key, ''];\n  }\n  switch (typeof value) {\n    case 'boolean':\n      return [key, value ? 'Yes' : 'No'];\n    default:\n      {\n        const strVal = value.toString();\n        if (needsQuotes(strVal)) {\n          return [key, `{${strVal.replace(/}/g, '}}')}}`];\n        }\n        return [key, strVal];\n      }\n  }\n}\nfunction buildConnectionString(data) {\n  return Object.entries(data).map(([key, value]) => {\n    return encodeTuple(key.trim(), value).join('=');\n  }).join(';');\n}\nexports.buildConnectionString = buildConnectionString;","map":{"version":3,"names":["isQuoted","val","i","length","needsQuotes","_a","match","encodeTuple","key","value","undefined","strVal","toString","replace","buildConnectionString","data","Object","entries","map","trim","join","exports"],"sources":["../../src/builder/index.ts"],"sourcesContent":[null],"mappings":";;;;;;AAEA,SAASA,QAAQA,CAACC,GAAW;EACzB,IAAIA,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;IAChB,OAAO,KAAK;;EAEhB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,GAAG,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;IACjC,IAAID,GAAG,CAACC,CAAC,CAAC,KAAK,GAAG,EAAE;MAChB,IAAIA,CAAC,GAAG,CAAC,KAAKD,GAAG,CAACE,MAAM,EAAE;QACtB;QACA,OAAO,IAAI;OACd,MAAM,IAAIF,GAAG,CAACC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;QAC3B;QACA,OAAO,KAAK;OACf,MAAM;QACH;QACAA,CAAC,EAAE;;;;EAIf,OAAO,KAAK;AAChB;AAEA,SAASE,WAAWA,CAACH,GAAW;;EAC5B,OAAO,CAACD,QAAQ,CAACC,GAAG,CAAC,IAAI,CAAC,EAAC,CAAAI,EAAA,GAAAJ,GAAG,CAACK,KAAK,CAAC,kCAAkC,CAAC,cAAAD,EAAA,uBAAAA,EAAA,CAAEF,MAAM;AACpF;AAEA,SAASI,WAAWA,CAACC,GAAW,EAAEC,KAAqB;EACnD,IAAIA,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKC,SAAS,EAAE;IACvC,OAAO,CAACF,GAAG,EAAE,EAAE,CAAC;;EAEpB,QAAQ,OAAOC,KAAK;IAChB,KAAK,SAAS;MACV,OAAO,CAACD,GAAG,EAAEC,KAAK,GAAG,KAAK,GAAG,IAAI,CAAC;IACtC;MAAS;QACL,MAAME,MAAM,GAAIF,KAAgC,CAACG,QAAQ,EAAE;QAC3D,IAAIR,WAAW,CAACO,MAAM,CAAC,EAAE;UACrB,OAAO,CAACH,GAAG,EAAE,IAAIG,MAAM,CAACE,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC;;QAEnD,OAAO,CAACL,GAAG,EAAEG,MAAM,CAAC;;;AAGhC;AAEA,SAAgBG,qBAAqBA,CAACC,IAAoC;EACtE,OAAOC,MAAM,CAACC,OAAO,CAACF,IAAI,CAAC,CAACG,GAAG,CAAC,CAAC,CAACV,GAAG,EAAEC,KAAK,CAAC,KAAI;IAC7C,OAAOF,WAAW,CAACC,GAAG,CAACW,IAAI,EAAE,EAAEV,KAAK,CAAC,CAACW,IAAI,CAAC,GAAG,CAAC;EACnD,CAAC,CAAC,CAACA,IAAI,CAAC,GAAG,CAAC;AAChB;AAJAC,OAAA,CAAAP,qBAAA,GAAAA,qBAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}