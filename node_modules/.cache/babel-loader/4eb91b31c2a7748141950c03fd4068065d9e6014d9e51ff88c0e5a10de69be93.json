{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.errorParser = errorParser;\nexports.infoParser = infoParser;\nvar _helpers = require(\"./helpers\");\nvar _token = require(\"./token\");\nfunction readToken(buf, offset, options) {\n  let tokenLength;\n  ({\n    offset,\n    value: tokenLength\n  } = (0, _helpers.readUInt16LE)(buf, offset));\n  if (buf.length < tokenLength + offset) {\n    throw new _helpers.NotEnoughDataError(tokenLength + offset);\n  }\n  let number;\n  ({\n    offset,\n    value: number\n  } = (0, _helpers.readUInt32LE)(buf, offset));\n  let state;\n  ({\n    offset,\n    value: state\n  } = (0, _helpers.readUInt8)(buf, offset));\n  let clazz;\n  ({\n    offset,\n    value: clazz\n  } = (0, _helpers.readUInt8)(buf, offset));\n  let message;\n  ({\n    offset,\n    value: message\n  } = (0, _helpers.readUsVarChar)(buf, offset));\n  let serverName;\n  ({\n    offset,\n    value: serverName\n  } = (0, _helpers.readBVarChar)(buf, offset));\n  let procName;\n  ({\n    offset,\n    value: procName\n  } = (0, _helpers.readBVarChar)(buf, offset));\n  let lineNumber;\n  ({\n    offset,\n    value: lineNumber\n  } = options.tdsVersion < '7_2' ? (0, _helpers.readUInt16LE)(buf, offset) : (0, _helpers.readUInt32LE)(buf, offset));\n  return new _helpers.Result({\n    'number': number,\n    'state': state,\n    'class': clazz,\n    'message': message,\n    'serverName': serverName,\n    'procName': procName,\n    'lineNumber': lineNumber\n  }, offset);\n}\nfunction infoParser(buf, offset, options) {\n  let data;\n  ({\n    offset,\n    value: data\n  } = readToken(buf, offset, options));\n  return new _helpers.Result(new _token.InfoMessageToken(data), offset);\n}\nfunction errorParser(buf, offset, options) {\n  let data;\n  ({\n    offset,\n    value: data\n  } = readToken(buf, offset, options));\n  return new _helpers.Result(new _token.ErrorMessageToken(data), offset);\n}","map":{"version":3,"names":["_helpers","require","_token","readToken","buf","offset","options","tokenLength","value","readUInt16LE","length","NotEnoughDataError","number","readUInt32LE","state","readUInt8","clazz","message","readUsVarChar","serverName","readBVarChar","procName","lineNumber","tdsVersion","Result","infoParser","data","InfoMessageToken","errorParser","ErrorMessageToken"],"sources":["C:\\Users\\phlos\\wv-temperature-map\\src\\backend\\node_modules\\tedious\\src\\token\\infoerror-token-parser.ts"],"sourcesContent":["import { NotEnoughDataError, readBVarChar, readUInt16LE, readUInt32LE, readUInt8, readUsVarChar, Result } from './helpers';\nimport { type ParserOptions } from './stream-parser';\n\nimport { InfoMessageToken, ErrorMessageToken } from './token';\n\ninterface TokenData {\n  number: number;\n  state: number;\n  class: number;\n  message: string;\n  serverName: string;\n  procName: string;\n  lineNumber: number;\n}\n\nfunction readToken(buf: Buffer, offset: number, options: ParserOptions): Result<TokenData> {\n  let tokenLength;\n  ({ offset, value: tokenLength } = readUInt16LE(buf, offset));\n\n  if (buf.length < tokenLength + offset) {\n    throw new NotEnoughDataError(tokenLength + offset);\n  }\n\n  let number;\n  ({ offset, value: number } = readUInt32LE(buf, offset));\n\n  let state;\n  ({ offset, value: state } = readUInt8(buf, offset));\n\n  let clazz;\n  ({ offset, value: clazz } = readUInt8(buf, offset));\n\n  let message;\n  ({ offset, value: message } = readUsVarChar(buf, offset));\n\n  let serverName;\n  ({ offset, value: serverName } = readBVarChar(buf, offset));\n\n  let procName;\n  ({ offset, value: procName } = readBVarChar(buf, offset));\n\n  let lineNumber;\n  ({ offset, value: lineNumber } = options.tdsVersion < '7_2' ? readUInt16LE(buf, offset) : readUInt32LE(buf, offset));\n\n  return new Result({\n    'number': number,\n    'state': state,\n    'class': clazz,\n    'message': message,\n    'serverName': serverName,\n    'procName': procName,\n    'lineNumber': lineNumber\n  }, offset);\n}\n\nexport function infoParser(buf: Buffer, offset: number, options: ParserOptions): Result<InfoMessageToken> {\n  let data;\n  ({ offset, value: data } = readToken(buf, offset, options));\n\n  return new Result(new InfoMessageToken(data), offset);\n}\n\nexport function errorParser(buf: Buffer, offset: number, options: ParserOptions): Result<ErrorMessageToken> {\n  let data;\n  ({ offset, value: data } = readToken(buf, offset, options));\n\n  return new Result(new ErrorMessageToken(data), offset);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}