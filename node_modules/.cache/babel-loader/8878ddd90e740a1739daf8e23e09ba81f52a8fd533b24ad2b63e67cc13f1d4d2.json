{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _token = require(\"./token\");\nvar _tdsVersions = require(\"../tds-versions\");\nvar _helpers = require(\"./helpers\");\nconst interfaceTypes = {\n  0: 'SQL_DFLT',\n  1: 'SQL_TSQL'\n};\nfunction loginAckParser(buf, offset, _options) {\n  // length\n  let tokenLength;\n  ({\n    offset,\n    value: tokenLength\n  } = (0, _helpers.readUInt16LE)(buf, offset));\n  if (buf.length < tokenLength + offset) {\n    throw new _helpers.NotEnoughDataError(tokenLength + offset);\n  }\n  let interfaceNumber;\n  ({\n    offset,\n    value: interfaceNumber\n  } = (0, _helpers.readUInt8)(buf, offset));\n  const interfaceType = interfaceTypes[interfaceNumber];\n  let tdsVersionNumber;\n  ({\n    offset,\n    value: tdsVersionNumber\n  } = (0, _helpers.readUInt32BE)(buf, offset));\n  const tdsVersion = _tdsVersions.versionsByValue[tdsVersionNumber];\n  let progName;\n  ({\n    offset,\n    value: progName\n  } = (0, _helpers.readBVarChar)(buf, offset));\n  let major;\n  ({\n    offset,\n    value: major\n  } = (0, _helpers.readUInt8)(buf, offset));\n  let minor;\n  ({\n    offset,\n    value: minor\n  } = (0, _helpers.readUInt8)(buf, offset));\n  let buildNumHi;\n  ({\n    offset,\n    value: buildNumHi\n  } = (0, _helpers.readUInt8)(buf, offset));\n  let buildNumLow;\n  ({\n    offset,\n    value: buildNumLow\n  } = (0, _helpers.readUInt8)(buf, offset));\n  return new _helpers.Result(new _token.LoginAckToken({\n    interface: interfaceType,\n    tdsVersion: tdsVersion,\n    progName: progName,\n    progVersion: {\n      major: major,\n      minor: minor,\n      buildNumHi: buildNumHi,\n      buildNumLow: buildNumLow\n    }\n  }), offset);\n}\nvar _default = exports.default = loginAckParser;\nmodule.exports = loginAckParser;","map":{"version":3,"names":["_token","require","_tdsVersions","_helpers","interfaceTypes","loginAckParser","buf","offset","_options","tokenLength","value","readUInt16LE","length","NotEnoughDataError","interfaceNumber","readUInt8","interfaceType","tdsVersionNumber","readUInt32BE","tdsVersion","versionsByValue","progName","readBVarChar","major","minor","buildNumHi","buildNumLow","Result","LoginAckToken","interface","progVersion","_default","exports","default","module"],"sources":["C:\\Users\\phlos\\wv-temperature-map\\src\\backend\\node_modules\\tedious\\src\\token\\loginack-token-parser.ts"],"sourcesContent":["import { type ParserOptions } from './stream-parser';\n\nimport { LoginAckToken } from './token';\n\nimport { versionsByValue as versions } from '../tds-versions';\nimport { NotEnoughDataError, readBVarChar, readUInt16LE, readUInt32BE, readUInt8, Result } from './helpers';\n\nconst interfaceTypes: { [key: number]: string } = {\n  0: 'SQL_DFLT',\n  1: 'SQL_TSQL'\n};\n\nfunction loginAckParser(buf: Buffer, offset: number, _options: ParserOptions): Result<LoginAckToken> {\n  // length\n  let tokenLength;\n  ({ offset, value: tokenLength } = readUInt16LE(buf, offset));\n\n  if (buf.length < tokenLength + offset) {\n    throw new NotEnoughDataError(tokenLength + offset);\n  }\n\n  let interfaceNumber;\n  ({ offset, value: interfaceNumber } = readUInt8(buf, offset));\n\n  const interfaceType = interfaceTypes[interfaceNumber];\n\n  let tdsVersionNumber;\n  ({ offset, value: tdsVersionNumber } = readUInt32BE(buf, offset));\n\n  const tdsVersion = versions[tdsVersionNumber];\n\n  let progName;\n  ({ offset, value: progName } = readBVarChar(buf, offset));\n\n  let major;\n  ({ offset, value: major } = readUInt8(buf, offset));\n\n  let minor;\n  ({ offset, value: minor } = readUInt8(buf, offset));\n\n  let buildNumHi;\n  ({ offset, value: buildNumHi } = readUInt8(buf, offset));\n\n  let buildNumLow;\n  ({ offset, value: buildNumLow } = readUInt8(buf, offset));\n\n  return new Result(new LoginAckToken({\n    interface: interfaceType,\n    tdsVersion: tdsVersion,\n    progName: progName,\n    progVersion: {\n      major: major,\n      minor: minor,\n      buildNumHi: buildNumHi,\n      buildNumLow: buildNumLow\n    }\n  }), offset);\n}\n\nexport default loginAckParser;\nmodule.exports = loginAckParser;\n"],"mappings":";;;;;;AAEA,IAAAA,MAAA,GAAAC,OAAA;AAEA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,QAAA,GAAAF,OAAA;AAEA,MAAMG,cAAyC,GAAG;EAChD,CAAC,EAAE,UAAU;EACb,CAAC,EAAE;AACL,CAAC;AAED,SAASC,cAAcA,CAACC,GAAW,EAAEC,MAAc,EAAEC,QAAuB,EAAyB;EACnG;EACA,IAAIC,WAAW;EACf,CAAC;IAAEF,MAAM;IAAEG,KAAK,EAAED;EAAY,CAAC,GAAG,IAAAN,QAAA,CAAAQ,YAAY,EAACL,GAAG,EAAEC,MAAM,CAAC;EAE3D,IAAID,GAAG,CAACM,MAAM,GAAGH,WAAW,GAAGF,MAAM,EAAE;IACrC,MAAM,IAAIJ,QAAA,CAAAU,kBAAkB,CAACJ,WAAW,GAAGF,MAAM,CAAC;EACpD;EAEA,IAAIO,eAAe;EACnB,CAAC;IAAEP,MAAM;IAAEG,KAAK,EAAEI;EAAgB,CAAC,GAAG,IAAAX,QAAA,CAAAY,SAAS,EAACT,GAAG,EAAEC,MAAM,CAAC;EAE5D,MAAMS,aAAa,GAAGZ,cAAc,CAACU,eAAe,CAAC;EAErD,IAAIG,gBAAgB;EACpB,CAAC;IAAEV,MAAM;IAAEG,KAAK,EAAEO;EAAiB,CAAC,GAAG,IAAAd,QAAA,CAAAe,YAAY,EAACZ,GAAG,EAAEC,MAAM,CAAC;EAEhE,MAAMY,UAAU,GAAGjB,YAAA,CAAAkB,eAAQ,CAACH,gBAAgB,CAAC;EAE7C,IAAII,QAAQ;EACZ,CAAC;IAAEd,MAAM;IAAEG,KAAK,EAAEW;EAAS,CAAC,GAAG,IAAAlB,QAAA,CAAAmB,YAAY,EAAChB,GAAG,EAAEC,MAAM,CAAC;EAExD,IAAIgB,KAAK;EACT,CAAC;IAAEhB,MAAM;IAAEG,KAAK,EAAEa;EAAM,CAAC,GAAG,IAAApB,QAAA,CAAAY,SAAS,EAACT,GAAG,EAAEC,MAAM,CAAC;EAElD,IAAIiB,KAAK;EACT,CAAC;IAAEjB,MAAM;IAAEG,KAAK,EAAEc;EAAM,CAAC,GAAG,IAAArB,QAAA,CAAAY,SAAS,EAACT,GAAG,EAAEC,MAAM,CAAC;EAElD,IAAIkB,UAAU;EACd,CAAC;IAAElB,MAAM;IAAEG,KAAK,EAAEe;EAAW,CAAC,GAAG,IAAAtB,QAAA,CAAAY,SAAS,EAACT,GAAG,EAAEC,MAAM,CAAC;EAEvD,IAAImB,WAAW;EACf,CAAC;IAAEnB,MAAM;IAAEG,KAAK,EAAEgB;EAAY,CAAC,GAAG,IAAAvB,QAAA,CAAAY,SAAS,EAACT,GAAG,EAAEC,MAAM,CAAC;EAExD,OAAO,IAAIJ,QAAA,CAAAwB,MAAM,CAAC,IAAI3B,MAAA,CAAA4B,aAAa,CAAC;IAClCC,SAAS,EAAEb,aAAa;IACxBG,UAAU,EAAEA,UAAU;IACtBE,QAAQ,EAAEA,QAAQ;IAClBS,WAAW,EAAE;MACXP,KAAK,EAAEA,KAAK;MACZC,KAAK,EAAEA,KAAK;MACZC,UAAU,EAAEA,UAAU;MACtBC,WAAW,EAAEA;IACf;EACF,CAAC,CAAC,EAAEnB,MAAM,CAAC;AACb;AAAC,IAAAwB,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEc5B,cAAc;AAC7B6B,MAAM,CAACF,OAAO,GAAG3B,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}